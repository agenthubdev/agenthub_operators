## FindBestPost

The **FindBestPost** class is a custom operator in AI context that takes in a dictionary of post titles and corresponding links, and returns the link to the best post that matches the user's query by using chat api.

### Inputs

- **title_link_dict (json):** A dictionary where keys are post titles and values are corresponding links.

### Parameters

- **query (string):** The user's query to search for the best post.

### Outputs

- **best_post_link (string):** The link to the best post that matches the user's query.

### Methods

- **declare_name():** Returns the operator's name, 'Find Best Post'.

- **declare_category():** Returns the operator's category, which is AI.

- **declare_parameters():** Returns a list containing a single parameter, the 'query'.

- **declare_inputs():** Returns a list containing a single input, the 'title_link_dict'.

- **declare_outputs():** Returns a list containing a single output, the 'best_post_link'.

- **run_step(step, ai_context: AiContext):** Executes the main functionality of the operator using the given step and AI context.

- **find_best_post(params, ai_context):** The helper method that performs the core functionality of the class. It takes in the parameters and AI context, extracts the user's query and the input dictionary of post titles and links, filters out the links that have already been used, and finds the best post that matches the user's query using AI context's run_chat_completion method. Finally, it sets the 'best_post_link' as the output.

### How it works

1. The `find_best_post` method takes the user's query and the input dictionary of post titles and links.
2. It checks the AI context's memory for any links that have already been used (tweeted) and filters them out to avoid repetition.
3. A context string is constructed by joining the remaining post titles with a comma separator.
4. A message is generated by combining the context string and the user's query, to be sent to the AI model for completion.
5. The `run_chat_completion` method of AI context is used to obtain the best post title that matches the user's query.
6. The method checks if the best post title exists in the dictionary and extracts the corresponding link.
7. The best post link is then set as the output.